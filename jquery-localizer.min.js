((function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};(function(c){var d,e,f,g;return f={langPath:"./",lang:"auto",acceptableLangs:["en","de","ja"],classPrefix:"localize-",reuseDics:!0,success:c.noop,error:c.noop,complete:c.noop},d=function(){function b(){this.getOrLoadDic=a(this.getOrLoadDic,this),this.loadDic=a(this.loadDic,this),this.dics={}}return b.prototype.loadDic=function(a,b,d){var e=this;return c.ajax({url:""+a+"/"+b+".json",dataType:"json",success:function(a){return e.dics[b]=a,null},error:function(a,b){},complete:function(){return d(e.dics[b])}})},b.prototype.getOrLoadDic=function(a,b,c){return this.dics[b]!=null?(c(),this.dics[b]):this.loadDic(a,b)},b}(),g=new d,e=function(){function d(b,d){this.elm=b,this.updateDOM=a(this.updateDOM,this),this.update=a(this.update,this),this.set=a(this.set,this),this.getLang=a(this.getLang,this),this.get=a(this.get,this),this.setLangAndLoadDic=a(this.setLangAndLoadDic,this),this.opts=c.extend(f,d),this.update(this.opts)}return d.prototype.setLangAndLoadDic=function(a,b){var c=this;return this.lang=a,(this.opts.reuseDic?g.getOrLoadDic:g.loadDic)(this.opts.langPath,this.lang,function(a){return c.dic=a,b()})},d.prototype.get=function(a){var b;return(b=this.dic)!=null?b[a]:void 0},d.prototype.getLang=function(){return this.lang},d.prototype.set=function(a,b){var c;return(c=this.dic)!=null?c[a]=b:void 0},d.prototype.update=function(a){var d,e,f,g,h,i,j,k=this;return this.opts=c.extend(this.opts,a),e=this.opts.lang==="auto"?(f=(g=navigator.language)!=null?g:navigator.browserLanguage,f!=null&&f!==""?(h=(i=function(){var a,b,c,e;c=this.opts.acceptableLangs;e=[];for(a=0,b=c.length;a<b;a++){d=c[a];if(d===f)e.push(d)}return e}.call(this))!=null?i[0]:void 0)!=null?h:(j=function(){var a,b,c,e;c=this.opts.acceptableLangs;e=[];for(a=0,b=c.length;a<b;a++){d=c[a];if(d.indexOf(f)===0)e.push(d)}return e}.call(this))!=null?j[0]:void 0:void 0):this.opts.lang,b.call(this.opts.acceptableLangs,e)<0&&(e=this.opts.acceptableLangs[0]),this.setLangAndLoadDic(e,function(){var a,b,c;return k.updateDOM(),k.dic!=null?(typeof (a=k.opts).success=="function"&&a.success(),k.elm.trigger("localizesuccess")):(typeof (b=k.opts).error=="function"&&b.error(),k.elm.trigger("localizeerror")),typeof (c=k.opts).complete=="function"&&c.complete(),k.elm.trigger("localizecomplete")})},d.prototype.updateDOM=function(){var a=this;return this.elm.find("*[class^="+this.opts.classPrefix+"]").each(function(b,d){var e,f,g,h,i;return g=c(d),f=(h=function(){var a,b,c,d;c=g.attr("class").split(/\s+/);d=[];for(a=0,b=c.length;a<b;a++){e=c[a];if(e.indexOf(this.opts.classPrefix)===0)d.push(e)}return d}.call(a)[0])!=null?h.slice(a.opts.classPrefix.length):void 0,g.text((i=a.dic[f])!=null?i:""),null})},d}(),c.fn.localize=function(a,b){var d,g,h;return c.type(a)==="string"?b!=null?f[a]!=null?(d={},d[a]=b,arguments.callee.call(this,d)):this.each(function(){var d;return(d=c(this).data("localizerCache"))!=null?d.set(a,b):void 0}):(g=this.eq(0))!=null?(h=g.data("localizerCache"))!=null?h.get(a):void 0:void 0:this.each(function(){var b,d;return d=c(this),b=d.data("localizerCache"),b!=null?b.update(a):d.data("localizerCache",new e(d,a)),null})}})(jQuery)})).call(this);